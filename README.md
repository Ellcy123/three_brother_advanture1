# ä¸‰å…„å¼Ÿçš„å†’é™© - å¯†å®¤é€ƒè„±

ä¸€ä¸ªæ”¯æŒä¸‰äººåœ¨çº¿åä½œçš„æ–‡å­—å†’é™©æ¸¸æˆï¼ŒåŸºäºWebSocketå®æ—¶é€šä¿¡ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ® **ä¸‰äººåä½œ**ï¼šæ”¯æŒ3åç©å®¶å®æ—¶åœ¨çº¿æ¸¸æˆ
- ğŸ  **å¤šæˆ¿é—´ç³»ç»Ÿ**ï¼šæ”¯æŒå¤šä¸ªæˆ¿é—´åŒæ—¶è¿›è¡Œæ¸¸æˆ
- ğŸ’¾ **è‡ªåŠ¨å­˜æ¡£**ï¼šæ¯å›åˆè‡ªåŠ¨ä¿å­˜æ¸¸æˆè¿›åº¦
- ğŸ”Œ **æ–­çº¿é‡è¿**ï¼šæ”¯æŒç©å®¶æ–­çº¿å60ç§’å†…é‡è¿
- ğŸ¨ **å¯è§†åŒ–åœºæ™¯**ï¼šä½¿ç”¨CSSç»˜åˆ¶çš„å¯†å®¤åœºæ™¯
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- Node.js
- Express
- Socket.IO (WebSocket)

### å‰ç«¯
- React
- Socket.IO Client
- CSS3 (åœºæ™¯å¯è§†åŒ–)

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
three-brothers-adventure/
â”œâ”€â”€ server/                 # åç«¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ index.js           # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”œâ”€â”€ roomManager.js     # æˆ¿é—´ç®¡ç†å™¨
â”‚   â”œâ”€â”€ gameState.js       # æ¸¸æˆçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ keywordMatcher.js  # å…³é”®è¯åŒ¹é…å¼•æ“
â”œâ”€â”€ client/                # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.js         # ä¸»åº”ç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ components/    # Reactç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ Lobby.js
â”‚       â”‚   â”œâ”€â”€ GameRoom.js
â”‚       â”‚   â”œâ”€â”€ GameScene.js
â”‚       â”‚   â”œâ”€â”€ PlayerStatus.js
â”‚       â”‚   â”œâ”€â”€ GameLog.js
â”‚       â”‚   â””â”€â”€ InputPanel.js
â”‚       â””â”€â”€ index.js       # å…¥å£æ–‡ä»¶
â””â”€â”€ package.json
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. **å®‰è£…ä¾èµ–**

```bash
# å®‰è£…åç«¯ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd client
npm install
cd ..
```

2. **å¯åŠ¨æœåŠ¡å™¨**

```bash
# å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£3001ï¼‰
npm start

# æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£3000ï¼‰
cd client
npm start
```

3. **è®¿é—®æ¸¸æˆ**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`

### Railwayéƒ¨ç½²

1. **å‡†å¤‡å·¥ä½œ**

ç¡®ä¿ä½ çš„ä»£ç å·²æ¨é€åˆ°GitHubä»“åº“ã€‚

2. **åœ¨Railwayåˆ›å»ºé¡¹ç›®**

- ç™»å½• [Railway.app](https://railway.app/)
- ç‚¹å‡» "New Project" â†’ "Deploy from GitHub repo"
- é€‰æ‹©ä½ çš„ä»“åº“
- Railwayä¼šè‡ªåŠ¨æ£€æµ‹Node.jsé¡¹ç›®

3. **é…ç½®ç¯å¢ƒå˜é‡**

åœ¨Railwayé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
- `NODE_ENV=production`
- `PORT=3001` (Railwayä¼šè‡ªåŠ¨æ³¨å…¥ï¼Œé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®)

4. **æ„å»ºè®¾ç½®**

Railwayä¼šè‡ªåŠ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
- Build: `cd client && npm install && npm run build && cd .. && npm install`
- Start: `npm start`

å¦‚æœéœ€è¦è‡ªå®šä¹‰ï¼Œå¯ä»¥åœ¨Railwayè®¾ç½®ä¸­ä¿®æ”¹ã€‚

5. **è®¿é—®åº”ç”¨**

éƒ¨ç½²å®Œæˆåï¼ŒRailwayä¼šæä¾›ä¸€ä¸ªå…¬ç½‘URLã€‚

## ğŸ“ æ„å»ºå’Œéƒ¨ç½²è„šæœ¬

åˆ›å»º `build.sh` æ–‡ä»¶ï¼ˆç”¨äºRailwayæ„å»ºï¼‰ï¼š

```bash
#!/bin/bash

# æ„å»ºå‰ç«¯
cd client
npm install
npm run build

# å®‰è£…åç«¯ä¾èµ–
cd ..
npm install

echo "Build completed!"
```

åœ¨ `package.json` ä¸­æ·»åŠ å¯åŠ¨è„šæœ¬ï¼š

```json
{
  "scripts": {
    "start": "node server/index.js",
    "dev": "nodemon server/index.js",
    "client": "cd client && npm start",
    "build": "cd client && npm run build",
    "heroku-postbuild": "cd client && npm install && npm run build"
  }
}
```

## ğŸ® æ¸¸æˆç©æ³•

### åŸºæœ¬è§„åˆ™

1. **ç©å®¶è§’è‰²**ï¼šä¸‰ä¸ªç©å®¶ä¼šè¢«éšæœºåˆ†é…ä¸ºçŒ«ã€ç‹—ã€é¾Ÿï¼ˆç©å®¶ä¸çŸ¥é“è‡ªå·±çš„èº«ä»½ï¼‰
2. **åˆå§‹çŠ¶æ€**ï¼š
   - çŒ«è¢«å›°åœ¨è¡Œæç®±ï¼ˆæ— æ³•è¡ŒåŠ¨ï¼‰
   - ç‹—è¢«å›°åœ¨å›šç¬¼ï¼ˆæ— æ³•è¡ŒåŠ¨ï¼‰
   - é¾Ÿå¯ä»¥è‡ªç”±è¡ŒåŠ¨

3. **å›åˆåˆ¶**ï¼šç©å®¶è½®æµè¾“å…¥å…³é”®è¯è¿›è¡Œæ¢ç´¢
4. **å…³é”®è¯æ ¼å¼**ï¼š`é“å…·+é“å…·` æˆ– `ç©å®¶å+é“å…·`
5. **é€šå…³ç›®æ ‡**ï¼šæ‰¾åˆ°4ä¸ªå­—æ¯ï¼ˆCã€Eã€Hã€Oï¼‰ï¼Œç»„æˆå¯†ç "ECHO"æ‰“å¼€å¤§é—¨

### å…³é”®è¯ç¤ºä¾‹

- `æ°´æ½­+é¾Ÿ` - æ½œæ°´è·å¾—æœ¨ç›’
- `è¡Œæç®±+é¾Ÿ` - è§£é”è¡Œæç®±æ•‘å‡ºçŒ«
- `é’¥åŒ™+å›šç¬¼` - æ‰“å¼€å›šç¬¼æ•‘å‡ºç‹—
- `æ˜¾ç¤ºå™¨+ç”µè„‘` - è·å¾—å­—æ¯H
- `è¡£æŸœ+é¾Ÿ` - å‘ç°éšè—çš„å°æˆ¿é—´

### å¤æ´»æœºåˆ¶

- ç©å®¶é˜µäº¡åï¼Œé˜Ÿå‹å¯æ¶ˆè€—2ç‚¹ç”Ÿå‘½å€¼å¤æ´»
- å¤æ´»åç”Ÿå‘½å€¼ä¸º1ç‚¹

### å®¹é”™æœºåˆ¶

- **æ–­çº¿é‡è¿**ï¼šç©å®¶æ–­çº¿å60ç§’å†…å¯é‡è¿
- **è‡ªåŠ¨è·³è¿‡**ï¼šæ— æ³•è¡ŒåŠ¨çš„ç©å®¶å›åˆè‡ªåŠ¨è·³è¿‡
- **æˆ¿é—´ä¿ç•™**ï¼šæ— æ´»åŠ¨çš„æˆ¿é—´ä¿ç•™1å°æ—¶åæ¸…ç†
- **å…¨ç­åˆ¤å®š**ï¼šæ‰€æœ‰ç©å®¶é˜µäº¡æ¸¸æˆç»“æŸ

## ğŸ”§ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„å…³é”®è¯ç»„åˆ

åœ¨ `server/keywordMatcher.js` çš„ `buildEffectsDatabase()` æ–¹æ³•ä¸­æ·»åŠ ï¼š

```javascript
effects['æ–°é“å…·+æ–°é“å…·'] = () => ({
  description: 'æ•ˆæœæè¿°',
  hpChanges: [
    { target: 'çŒ«', amount: -1 }  // ç”Ÿå‘½å€¼å˜åŒ–
  ],
  stateChanges: [
    { type: 'obtainLetter', letter: 'X' }  // è·å¾—å­—æ¯
  ]
});
```

### ä¿®æ”¹åœºæ™¯

åœ¨ `client/src/components/GameScene.js` ä¸­ä¿®æ”¹åœºæ™¯å¸ƒå±€å’Œæ ·å¼ã€‚

### è°ƒè¯•æ¨¡å¼

åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­å¯ä»¥æŸ¥çœ‹WebSocketäº‹ä»¶ï¼š

```javascript
// æŸ¥çœ‹æ‰€æœ‰Socket.IOäº‹ä»¶
socket.onAny((event, ...args) => {
  console.log(event, args);
});
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£å†²çª

å¦‚æœ3000æˆ–3001ç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š
- åç«¯ï¼š`server/index.js` ä¸­çš„ `PORT` å˜é‡
- å‰ç«¯ï¼š`client/package.json` ä¸­æ·»åŠ  `"start": "PORT=3002 react-scripts start"`

### 2. WebSocketè¿æ¥å¤±è´¥

æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿WebSocketç«¯å£æœªè¢«é˜»æ­¢ã€‚

### 3. Railwayéƒ¨ç½²åæ— æ³•è¿æ¥

ç¡®ä¿ï¼š
- å‰ç«¯ç¯å¢ƒå˜é‡ `REACT_APP_SOCKET_URL` æŒ‡å‘æ­£ç¡®çš„åç«¯URL
- Railwayé¡¹ç›®å·²æ­£ç¡®ç»‘å®šåŸŸå
- WebSocketåè®®ä½¿ç”¨ `wss://` (ç”Ÿäº§ç¯å¢ƒ)

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·åœ¨GitHubä¸Šåˆ›å»ºIssueã€‚
